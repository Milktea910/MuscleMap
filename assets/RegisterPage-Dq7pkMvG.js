import{r as q,ar as Q,ae as z,aa as _,ab as S,ac as g,ag as o,f as l,as as $,at as C,au as e,ay as v,ah as y}from"./index-Bn42XH2Q.js";import{Q as U}from"./QSelect-l1WsnEj9.js";import{Q as P}from"./QForm-Cmlr_ukS.js";import{Q as B}from"./QPage-CE1UNi1s.js";import{u as k,c as F,a as u,d as O,b as t}from"./index.esm-CSjafN7A.js";import{u as h}from"./use-quasar-B9tJROjq.js";import"./QChip-4Dk9RzM6.js";import"./QItemLabel-CkehzaSt.js";import"./position-engine-C9dRj_c-.js";import"./selection-CqqBGjGe.js";import"./rtl-DFPa-2ov.js";import"./format-CoaQEihs.js";const N={class:"container q-mt-xl"},R={class:"row justify-center"},j={class:"col-12 col-sm-8 col-md-6 col-lg-4"},A={class:"text-center q-mt-md"},I={class:"text-center q-mt-md"},ae={__name:"RegisterPage",setup(L){const w=h(),V=z(),f=q(!1),b=[{label:"男性",value:"male"},{label:"女性",value:"female"}],M=k({validationSchema:F({account:u().required("帳號是必填的").min(4,"帳號至少需要 4 個字元").max(20,"帳號最多只能有 20 個字元").matches(/^[a-zA-Z0-9]+$/,"帳號只能包含英文字母和數字"),username:u().required("使用者名稱是必填的").min(2,"使用者名稱至少需要 2 個字元").max(30,"使用者名稱最多只能有 30 個字元"),email:u().required("電子郵件是必填的").email("請輸入有效的電子郵件地址"),password:u().required("密碼是必填的").min(4,"密碼至少需要 4 個字元").max(20,"密碼最多只能有 20 個字元"),confirmPassword:u().required("確認密碼是必填的").oneOf([O("password")],"密碼不一致"),gender:u().required("性別是必填的").oneOf(["male","female"],"請選擇有效的性別")})}),n=t("account"),m=t("username"),d=t("email"),i=t("password"),c=t("confirmPassword"),p=t("gender"),x=M.handleSubmit(async s=>{f.value=!0;try{await Q.create({account:s.account,username:s.username,email:s.email,password:s.password,gender:s.gender}),w.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"註冊成功，請登入"}),V.push("/login")}catch(a){console.error(a);const r=a?.response?.data?.message||"註冊失敗，請檢查輸入資料";w.notify({color:"red-5",textColor:"white",icon:"warning",message:r})}finally{f.value=!1}});return(s,a)=>(S(),_(B,{class:"flex flex-center"},{default:g(()=>[o("div",N,[o("div",R,[o("div",j,[l($,{class:"q-pa-lg"},{default:g(()=>[l(C,null,{default:g(()=>[a[7]||(a[7]=o("div",{class:"text-h4 text-center q-mb-md"},"註冊",-1)),l(P,{onSubmit:e(x),class:"q-gutter-xs"},{default:g(()=>[l(v,{filled:"",modelValue:e(n).value.value,"onUpdate:modelValue":a[0]||(a[0]=r=>e(n).value.value=r),label:"帳號","lazy-rules":"",rules:e(n).errorMessage.value?[e(n).errorMessage.value]:[],error:!!e(n).errorMessage.value,type:"text",autocomplete:"username"},null,8,["modelValue","rules","error"]),l(v,{filled:"",modelValue:e(m).value.value,"onUpdate:modelValue":a[1]||(a[1]=r=>e(m).value.value=r),label:"使用者名稱","lazy-rules":"",rules:e(m).errorMessage.value?[e(m).errorMessage.value]:[],error:!!e(m).errorMessage.value,type:"text"},null,8,["modelValue","rules","error"]),l(v,{filled:"",modelValue:e(d).value.value,"onUpdate:modelValue":a[2]||(a[2]=r=>e(d).value.value=r),label:"電子郵件","lazy-rules":"",rules:e(d).errorMessage.value?[e(d).errorMessage.value]:[],error:!!e(d).errorMessage.value,type:"email",autocomplete:"email"},null,8,["modelValue","rules","error"]),l(v,{filled:"",modelValue:e(i).value.value,"onUpdate:modelValue":a[3]||(a[3]=r=>e(i).value.value=r),label:"密碼","lazy-rules":"",rules:e(i).errorMessage.value?[e(i).errorMessage.value]:[],error:!!e(i).errorMessage.value,type:"password",autocomplete:"new-password"},null,8,["modelValue","rules","error"]),l(v,{filled:"",modelValue:e(c).value.value,"onUpdate:modelValue":a[4]||(a[4]=r=>e(c).value.value=r),label:"確認密碼","lazy-rules":"",rules:e(c).errorMessage.value?[e(c).errorMessage.value]:[],error:!!e(c).errorMessage.value,type:"password",autocomplete:"new-password"},null,8,["modelValue","rules","error"]),l(U,{filled:"",modelValue:e(p).value.value,"onUpdate:modelValue":a[5]||(a[5]=r=>e(p).value.value=r),label:"性別",options:b,"emit-value":"","map-options":"","lazy-rules":"",rules:e(p).errorMessage.value?[e(p).errorMessage.value]:[],error:!!e(p).errorMessage.value},null,8,["modelValue","rules","error"]),o("div",A,[l(y,{label:"註冊",type:"submit",color:"primary",class:"full-width",loading:f.value,size:"md"},null,8,["loading"])]),o("div",I,[l(y,{flat:"",label:"已有帳號？登入",color:"secondary",onClick:a[6]||(a[6]=r=>s.$router.push("/login")),size:"md"})])]),_:1},8,["onSubmit"])]),_:1,__:[7]})]),_:1})])])])]),_:1}))}};export{ae as default};
