import{a9 as ke,r as p,w as we,c as Z,o as be,aa as x,ab as n,ac as i,ag as a,f as s,ai as r,ao as g,ah as v,au as ee,as as V,at as _,an as W,F as w,aj as b,al as M,ak as c,av as z,ax as te,ay as k,az as j}from"./index-Bn42XH2Q.js";import{Q as H,a as I,b as J,c as S}from"./QTabPanels-DyHw-Y6y.js";import{Q as T}from"./QChip-4Dk9RzM6.js";import{Q as se}from"./QSelect-l1WsnEj9.js";import{Q as ge}from"./QPage-CE1UNi1s.js";import{u as _e}from"./use-quasar-B9tJROjq.js";import{r as D}from"./routine-CuuvH8Q_.js";import{w as xe}from"./wiki-BbAW4oNI.js";import{_ as Ve}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./touch-CjDUbXLY.js";import"./rtl-DFPa-2ov.js";import"./selection-CqqBGjGe.js";import"./use-render-cache-DLxPkVnQ.js";import"./QItemLabel-CkehzaSt.js";import"./position-engine-C9dRj_c-.js";import"./format-CoaQEihs.js";const De={class:"container fade-in-up"},Re={class:"row items-center justify-between q-mb-sm"},he={key:1},qe={key:1,class:"row q-col-gutter-lg"},Ce={class:"row items-center justify-between q-mb-sm"},Ue={class:"text-h6 routine-title"},Pe={class:"text-body2 text-grey-7 routine-description"},Qe={class:"q-mt-md routine-workouts"},$e={key:0},Ne={class:"weekly-plan-summary"},Le={key:0,class:"text-grey-6"},We={key:1,class:"text-grey-6"},Me={key:1},Ee={class:"workout-list"},Ae={key:2,class:"text-grey-6"},ze={key:0,class:"q-mt-md"},je={class:"q-gutter-sm"},Ie={key:1,class:"row q-col-gutter-lg"},Se={class:"row items-center justify-between q-mb-sm"},Te={class:"text-h6 routine-title"},Be={class:"text-body2 text-grey-7 q-mb-sm"},Fe={class:"text-body2 text-grey-7 routine-description"},Oe={class:"q-mt-md routine-workouts"},Ge={key:0},He={class:"weekly-plan-summary"},Je={key:0,class:"text-grey-6"},Ke={key:1,class:"text-grey-6"},Xe={key:1},Ye={class:"workout-list"},Ze={key:2,class:"text-grey-6"},et={class:"q-mt-md"},tt={class:"q-mb-md"},st={key:0},lt={class:"row q-col-gutter-lg items-center"},ot={class:"col-12 col-md-4"},at={class:"col-6 col-md-2"},nt={class:"col-6 col-md-2"},it={class:"col-6 col-md-2"},rt={class:"col-6 col-md-1"},dt={class:"q-mb-md"},ut={key:0},mt={class:"row q-col-gutter-lg items-center"},ct={class:"col-12 col-md-4"},yt={class:"col-6 col-md-2"},ft={class:"col-6 col-md-2"},vt={class:"col-6 col-md-2"},pt={class:"col-6 col-md-1"},kt={__name:"MyRoutinesPage",setup(wt){const y=_e(),q=ke(),C=p("my"),U=p("monday"),P=p([]),Q=p([]),$=p(!1),E=p(!1),B=p(!1),F=p(!1),O=p([]),N=p([]),G=p(null),m=p({title:"",content:"",isPublic:!1,weeklyPlan:[{day:"monday",name:"週一訓練",workouts:[],notes:"",isRestDay:!1},{day:"tuesday",name:"週二訓練",workouts:[],notes:"",isRestDay:!1},{day:"wednesday",name:"週三訓練",workouts:[],notes:"",isRestDay:!1},{day:"thursday",name:"週四訓練",workouts:[],notes:"",isRestDay:!1},{day:"friday",name:"週五訓練",workouts:[],notes:"",isRestDay:!1},{day:"saturday",name:"週六訓練",workouts:[],notes:"",isRestDay:!1},{day:"sunday",name:"週日休息",workouts:[],notes:"",isRestDay:!0}],workouts:[]}),u=p({title:"",content:"",isPublic:!1,weeklyPlan:[{day:0,name:"星期一",workouts:[],notes:"",isRestDay:!1},{day:1,name:"星期二",workouts:[],notes:"",isRestDay:!1},{day:2,name:"星期三",workouts:[],notes:"",isRestDay:!1},{day:3,name:"星期四",workouts:[],notes:"",isRestDay:!1},{day:4,name:"星期五",workouts:[],notes:"",isRestDay:!1},{day:5,name:"星期六",workouts:[],notes:"",isRestDay:!1},{day:6,name:"星期日",workouts:[],notes:"",isRestDay:!0}]}),R=p(0),h=o=>{const t={monday:"週一",tuesday:"週二",wednesday:"週三",thursday:"週四",friday:"週五",saturday:"週六",sunday:"週日"};return typeof o=="number"?["星期一","星期二","星期三","星期四","星期五","星期六","星期日"][o]||`第${o+1}天`:t[o]||o},A=async()=>{try{if(!q.isLoggedIn)return;const{data:o}=await D.getMyRoutines();P.value=o.data}catch(o){console.error("載入我的課表失敗:",o),y.notify({color:"red-5",textColor:"white",icon:"warning",message:o.response?.data?.message||"載入我的課表失敗"})}},le=async()=>{try{if(!q.isLoggedIn)return;const{data:o}=await D.getLikedRoutines();Q.value=o.data}catch(o){console.error("載入喜歡的課表失敗:",o),y.notify({color:"red-5",textColor:"white",icon:"warning",message:o.response?.data?.message||"載入喜歡的課表失敗"})}};we(C,o=>{o==="my"?A():o==="liked"&&le()});const oe=async o=>{try{await D.toggleLike(o._id);const t=Q.value.findIndex(e=>e._id===o._id);t>-1&&Q.value.splice(t,1),y.notify({color:"positive",textColor:"white",icon:"favorite_border",message:"已取消喜歡"})}catch(t){console.error("切換按讚狀態失敗:",t),y.notify({color:"red-5",textColor:"white",icon:"warning",message:"操作失敗"})}},ae=async o=>{try{const t=!o.isPublic;await D.updateVisibility(o._id,t),o.isPublic=t,y.notify({color:"positive",textColor:"white",icon:"visibility",message:`課表已設為${t?"公開":"私人"}`})}catch(t){console.error("更新公開狀態失敗:",t),y.notify({color:"red-5",textColor:"white",icon:"warning",message:"更新公開狀態失敗"})}},ne=async o=>{y.dialog({title:"確認刪除",message:"您確定要刪除這個課表嗎？此操作無法復原。",cancel:!0,persistent:!0}).onOk(async()=>{try{await D.delete(o);const t=P.value.findIndex(e=>e._id===o);t>-1&&P.value.splice(t,1),y.notify({color:"positive",textColor:"white",icon:"check",message:"課表刪除成功"})}catch(t){console.error("刪除課表失敗:",t),y.notify({color:"red-5",textColor:"white",icon:"warning",message:"刪除課表失敗"})}})},ie=o=>{G.value=o._id,R.value=0;let t=[];o.weeklyPlan&&o.weeklyPlan.length>0?t=o.weeklyPlan.map(e=>({day:e.day,name:e.name,isRestDay:e.isRestDay,notes:e.notes||"",workouts:e.workouts.map(l=>({exercise:l.exercise._id||l.exercise,sets:l.sets,reps:l.reps,rest:l.rest}))})):o.workouts&&o.workouts.length>0?(t=[{day:0,name:"星期一",workouts:[],notes:"",isRestDay:!1},{day:1,name:"星期二",workouts:[],notes:"",isRestDay:!1},{day:2,name:"星期三",workouts:[],notes:"",isRestDay:!1},{day:3,name:"星期四",workouts:[],notes:"",isRestDay:!1},{day:4,name:"星期五",workouts:[],notes:"",isRestDay:!1},{day:5,name:"星期六",workouts:[],notes:"",isRestDay:!1},{day:6,name:"星期日",workouts:[],notes:"",isRestDay:!0}],t[0].workouts=o.workouts.map(e=>({exercise:e.exercise._id||e.exercise,sets:e.sets,reps:e.reps,rest:e.rest})),t[0].name="主要訓練"):t=[{day:0,name:"星期一",workouts:[],notes:"",isRestDay:!1},{day:1,name:"星期二",workouts:[],notes:"",isRestDay:!1},{day:2,name:"星期三",workouts:[],notes:"",isRestDay:!1},{day:3,name:"星期四",workouts:[],notes:"",isRestDay:!1},{day:4,name:"星期五",workouts:[],notes:"",isRestDay:!1},{day:5,name:"星期六",workouts:[],notes:"",isRestDay:!1},{day:6,name:"星期日",workouts:[],notes:"",isRestDay:!0}],u.value={title:o.title,content:o.content,isPublic:o.isPublic,weeklyPlan:t},E.value=!0},re=async()=>{if(!m.value.title||!m.value.content){y.notify({color:"orange-5",textColor:"white",icon:"warning",message:"請填寫完整的課表資訊"});return}if(!m.value.weeklyPlan.some(t=>!t.isRestDay&&t.workouts.length>0)){y.notify({color:"orange-5",textColor:"white",icon:"warning",message:"請至少在一天中添加一個動作"});return}for(const t of m.value.weeklyPlan)if(!t.isRestDay)for(let e=0;e<t.workouts.length;e++){const l=t.workouts[e];if(!l.exercise||!l.sets||!l.reps||l.rest===void 0){y.notify({color:"orange-5",textColor:"white",icon:"warning",message:`請完整填寫${t.name}動作 ${e+1} 的資訊`});return}}try{B.value=!0;const t={title:m.value.title,content:m.value.content,isPublic:m.value.isPublic,weeklyPlan:m.value.weeklyPlan.map(e=>({day:e.day,name:e.name,isRestDay:e.isRestDay,notes:e.notes,workouts:e.workouts.map(l=>({exercise:l.exercise,sets:Number(l.sets),reps:Number(l.reps),rest:Number(l.rest)}))}))};await D.create(t),y.notify({color:"positive",textColor:"white",icon:"check",message:"課表建立成功"}),X(),await A()}catch(t){console.error("建立課表失敗:",t),y.notify({color:"red-5",textColor:"white",icon:"warning",message:t.response?.data?.message||"建立課表失敗"})}finally{B.value=!1}},de=async()=>{if(!u.value.title||!u.value.content){y.notify({color:"orange-5",textColor:"white",icon:"warning",message:"請填寫完整的課表資訊"});return}if(!u.value.weeklyPlan.some(t=>!t.isRestDay&&t.workouts.length>0)){y.notify({color:"orange-5",textColor:"white",icon:"warning",message:"請至少在一天中添加一個動作"});return}for(const t of u.value.weeklyPlan)if(!t.isRestDay)for(let e=0;e<t.workouts.length;e++){const l=t.workouts[e];if(!l.exercise||!l.sets||!l.reps||l.rest===void 0){y.notify({color:"orange-5",textColor:"white",icon:"warning",message:`請完整填寫${t.name}動作 ${e+1} 的資訊`});return}}try{F.value=!0;const t={title:u.value.title,content:u.value.content,isPublic:u.value.isPublic,weeklyPlan:u.value.weeklyPlan.map(e=>({day:e.day,name:e.name,isRestDay:e.isRestDay,notes:e.notes,workouts:e.workouts.map(l=>({exercise:l.exercise,sets:Number(l.sets),reps:Number(l.reps),rest:Number(l.rest)}))}))};await D.update(G.value,t),y.notify({color:"positive",textColor:"white",icon:"check",message:"課表更新成功"}),Y(),await A()}catch(t){console.error("更新課表失敗:",t),y.notify({color:"red-5",textColor:"white",icon:"warning",message:t.response?.data?.message||"更新課表失敗"})}finally{F.value=!1}},ue=o=>{m.value.weeklyPlan[o].workouts.push({exercise:"",sets:3,reps:10,rest:60})},me=(o,t)=>{m.value.weeklyPlan[o].workouts.splice(t,1)},ce=o=>{u.value.weeklyPlan[o].workouts.push({exercise:"",sets:3,reps:10,rest:60})},ye=(o,t)=>{u.value.weeklyPlan[o].workouts.splice(t,1)},fe=async()=>{try{const{data:o}=await xe.getExercises();O.value=o.exercises||[],N.value=o.exercises||[]}catch(o){console.error("載入動作列表失敗:",o),y.notify({color:"red-5",textColor:"white",icon:"warning",message:"載入動作列表失敗"})}},K=(o,t)=>{t(()=>{if(o==="")N.value=O.value;else{const e=o.toLowerCase();N.value=O.value.filter(l=>l.name.toLowerCase().indexOf(e)>-1)}})},ve=Z(()=>{if(!m.value.title||!m.value.content||!m.value.weeklyPlan.some(t=>!t.isRestDay&&t.workouts.length>0))return!1;for(const t of m.value.weeklyPlan)if(!t.isRestDay){for(const e of t.workouts)if(!e.exercise||!e.sets||!e.reps||e.rest===void 0)return!1}return!0}),pe=Z(()=>{if(!u.value.title||!u.value.content||!u.value.weeklyPlan.some(t=>!t.isRestDay&&t.workouts.length>0))return!1;for(const t of u.value.weeklyPlan)if(!t.isRestDay){for(const e of t.workouts)if(!e.exercise||!e.sets||!e.reps||e.rest===void 0)return!1}return!0}),X=()=>{$.value=!1,U.value=0,m.value={title:"",content:"",isPublic:!1,weeklyPlan:[{day:0,name:"星期一",workouts:[],notes:"",isRestDay:!1},{day:1,name:"星期二",workouts:[],notes:"",isRestDay:!1},{day:2,name:"星期三",workouts:[],notes:"",isRestDay:!1},{day:3,name:"星期四",workouts:[],notes:"",isRestDay:!1},{day:4,name:"星期五",workouts:[],notes:"",isRestDay:!1},{day:5,name:"星期六",workouts:[],notes:"",isRestDay:!1},{day:6,name:"星期日",workouts:[],notes:"",isRestDay:!0}]}},Y=()=>{E.value=!1,G.value=null,R.value=0,u.value={title:"",content:"",isPublic:!1,weeklyPlan:[{day:0,name:"星期一",workouts:[],notes:"",isRestDay:!1},{day:1,name:"星期二",workouts:[],notes:"",isRestDay:!1},{day:2,name:"星期三",workouts:[],notes:"",isRestDay:!1},{day:3,name:"星期四",workouts:[],notes:"",isRestDay:!1},{day:4,name:"星期五",workouts:[],notes:"",isRestDay:!1},{day:5,name:"星期六",workouts:[],notes:"",isRestDay:!1},{day:6,name:"星期日",workouts:[],notes:"",isRestDay:!0}]}};return be(async()=>{await fe(),q.isLoggedIn&&await A()}),(o,t)=>(n(),x(ge,{class:"q-pa-md"},{default:i(()=>[a("div",De,[a("div",Re,[t[16]||(t[16]=a("div",null,[a("h1",{class:"section text-h4 q-mt-lg q-mb-none"},"我的課表"),a("p",{class:"section-description q-mb-none q-mt-sm"},[g(" 在這裡您可以查看和管理自己的課表，建立新的課表或編輯現有的課表。"),a("br"),g(" 您也可以瀏覽其他用戶分享的公開課表，並將喜歡的課表加入收藏。 ")])],-1)),s(v,{color:"primary",icon:"add",label:"建立課表",onClick:t[0]||(t[0]=e=>$.value=!0),disable:!ee(q).isLoggedIn},null,8,["disable"])]),s(H,{modelValue:C.value,"onUpdate:modelValue":t[1]||(t[1]=e=>C.value=e),class:"text-primary q-mb-lg q-mt-lg",align:"left"},{default:i(()=>[s(I,{name:"my",label:"我的課表"}),s(I,{name:"liked",label:"我喜歡的課表"})]),_:1},8,["modelValue"]),ee(q).isLoggedIn?(n(),r("div",he,[s(J,{modelValue:C.value,"onUpdate:modelValue":t[3]||(t[3]=e=>C.value=e),animated:""},{default:i(()=>[s(S,{name:"my"},{default:i(()=>[P.value.length===0?(n(),x(V,{key:0,class:"text-center q-pa-lg"},{default:i(()=>[s(_,null,{default:i(()=>[s(W,{name:"assignment",size:"4rem",color:"grey-5"}),t[18]||(t[18]=a("div",{class:"text-h6 q-mt-md text-grey-6"},"您還沒有建立任何課表",-1)),s(v,{color:"primary",label:"建立第一個課表",class:"q-mt-md",onClick:t[2]||(t[2]=e=>$.value=!0)})]),_:1,__:[18]})]),_:1})):(n(),r("div",qe,[(n(!0),r(w,null,b(P.value,e=>(n(),r("div",{key:e._id,class:"col-12 col-md-6 col-lg-4"},[s(V,{class:"routine-card"},{default:i(()=>[s(_,{class:"routine-card-content"},{default:i(()=>[a("div",Ce,[a("div",Ue,c(e.title),1),s(T,{color:e.isPublic?"green":"orange","text-color":"white",size:"md"},{default:i(()=>[g(c(e.isPublic?"公開":"私人"),1)]),_:2},1032,["color"])]),a("div",Pe,c(e.content),1),a("div",Qe,[e.weeklyPlan&&e.weeklyPlan.length>0?(n(),r("div",$e,[t[19]||(t[19]=a("div",{class:"text-subtitle2 q-mb-sm"},"週計劃：",-1)),a("div",Ne,[(n(!0),r(w,null,b(e.weeklyPlan,l=>(n(),r("div",{key:l.day,class:"day-plan-item text-body2"},[a("strong",null,c(h(l.day)),1),g(": "+c(l.name)+" ",1),l.isRestDay?(n(),r("span",Le," (休息日)")):l.workouts.length>0?(n(),r("span",We," ("+c(l.workouts.length)+" 個動作) ",1)):M("",!0)]))),128))])])):e.workouts&&e.workouts.length>0?(n(),r("div",Me,[t[20]||(t[20]=a("div",{class:"text-subtitle2 q-mb-sm"},"動作內容：",-1)),a("div",Ee,[(n(!0),r(w,null,b(e.workouts,(l,d)=>(n(),r("div",{key:d,class:"workout-item text-body2"},c(l.exercise?.name)+" - "+c(l.sets)+"組 x "+c(l.reps)+"次 (休息 "+c(l.rest)+"秒) ",1))),128))])])):(n(),r("div",Ae,"尚未設定訓練內容"))]),e.isPublic?(n(),r("div",ze,[s(T,{color:"red","text-color":"white",size:"md"},{default:i(()=>[s(W,{name:"favorite"}),g(" "+c(e.likesCount||0)+" 個讚 ",1)]),_:2},1024)])):M("",!0)]),_:2},1024),s(z,{class:"justify-between"},{default:i(()=>[a("div",null,[s(v,{flat:"",color:e.isPublic?"orange":"green",icon:e.isPublic?"visibility_off":"visibility",onClick:l=>ae(e)},{default:i(()=>[g(c(e.isPublic?"設為私人":"設為公開"),1)]),_:2},1032,["color","icon","onClick"])]),a("div",je,[s(v,{flat:"",color:"primary",icon:"edit",onClick:l=>ie(e)},{default:i(()=>t[21]||(t[21]=[g(" 編輯 ")])),_:2,__:[21]},1032,["onClick"]),s(v,{flat:"",color:"red",icon:"delete",onClick:l=>ne(e._id)},{default:i(()=>t[22]||(t[22]=[g(" 刪除 ")])),_:2,__:[22]},1032,["onClick"])])]),_:2},1024)]),_:2},1024)]))),128))]))]),_:1}),s(S,{name:"liked"},{default:i(()=>[Q.value.length===0?(n(),x(V,{key:0,class:"text-center q-pa-lg"},{default:i(()=>[s(_,null,{default:i(()=>[s(W,{name:"favorite_border",size:"4rem",color:"grey-5"}),t[23]||(t[23]=a("div",{class:"text-h6 q-mt-md text-grey-6"},"您還沒有喜歡任何課表",-1)),s(v,{color:"primary",label:"瀏覽公開課表",class:"q-mt-md",to:"/routines"})]),_:1,__:[23]})]),_:1})):(n(),r("div",Ie,[(n(!0),r(w,null,b(Q.value,e=>(n(),r("div",{key:e._id,class:"col-12 col-md-6 col-lg-4"},[s(V,{class:"routine-card"},{default:i(()=>[s(_,{class:"routine-card-content"},{default:i(()=>[a("div",Se,[a("div",Te,c(e.title),1),s(T,{color:"green","text-color":"white",size:"md"},{default:i(()=>t[24]||(t[24]=[g(" 公開 ")])),_:1,__:[24]})]),a("div",Be," 作者："+c(e.user?.username||"未知"),1),a("div",Fe,c(e.content),1),a("div",Oe,[e.weeklyPlan&&e.weeklyPlan.length>0?(n(),r("div",Ge,[t[25]||(t[25]=a("div",{class:"text-subtitle2 q-mb-sm"},"週計劃：",-1)),a("div",He,[(n(!0),r(w,null,b(e.weeklyPlan,l=>(n(),r("div",{key:l.day,class:"day-plan-item text-body2"},[a("strong",null,c(h(l.day)),1),g(": "+c(l.name)+" ",1),l.isRestDay?(n(),r("span",Je," (休息日)")):l.workouts.length>0?(n(),r("span",Ke," ("+c(l.workouts.length)+" 個動作) ",1)):M("",!0)]))),128))])])):e.workouts&&e.workouts.length>0?(n(),r("div",Xe,[t[26]||(t[26]=a("div",{class:"text-subtitle2 q-mb-sm"},"動作內容：",-1)),a("div",Ye,[(n(!0),r(w,null,b(e.workouts,(l,d)=>(n(),r("div",{key:d,class:"workout-item text-body2"},c(l.exercise?.name)+" - "+c(l.sets)+"組 x "+c(l.reps)+"次 (休息 "+c(l.rest)+"秒) ",1))),128))])])):(n(),r("div",Ze,"尚未設定訓練內容"))]),a("div",et,[s(T,{color:"red","text-color":"white",size:"md"},{default:i(()=>[s(W,{name:"favorite"}),g(" "+c(e.likesCount||0)+" 個讚 ",1)]),_:2},1024)])]),_:2},1024),s(z,{class:"justify-end"},{default:i(()=>[s(v,{flat:"",color:"red",icon:"favorite",onClick:l=>oe(e),label:"取消喜歡"},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]))),128))]))]),_:1})]),_:1},8,["modelValue"])])):(n(),x(V,{key:0,class:"text-center q-pa-lg"},{default:i(()=>[s(_,null,{default:i(()=>[s(W,{name:"login",size:"4rem",color:"grey-5"}),t[17]||(t[17]=a("div",{class:"text-h6 q-mt-md text-grey-6"},"請先登入查看您的課表",-1)),s(v,{color:"primary",label:"前往登入",class:"q-mt-md",to:"/login"})]),_:1,__:[17]})]),_:1})),s(te,{modelValue:$.value,"onUpdate:modelValue":t[9]||(t[9]=e=>$.value=e),position:"top"},{default:i(()=>[s(V,{style:{"min-width":"500px","max-width":"800px"}},{default:i(()=>[s(_,null,{default:i(()=>t[27]||(t[27]=[a("div",{class:"text-h6"},"建立新課表",-1)])),_:1,__:[27]}),s(_,{class:"q-pt-none"},{default:i(()=>[s(k,{modelValue:m.value.title,"onUpdate:modelValue":t[4]||(t[4]=e=>m.value.title=e),label:"課表名稱",outlined:"",class:"q-mb-md"},null,8,["modelValue"]),s(k,{modelValue:m.value.content,"onUpdate:modelValue":t[5]||(t[5]=e=>m.value.content=e),label:"課表描述",outlined:"",type:"textarea",rows:"3",class:"q-mb-md"},null,8,["modelValue"]),s(j,{modelValue:m.value.isPublic,"onUpdate:modelValue":t[6]||(t[6]=e=>m.value.isPublic=e),label:"設為公開課表",class:"q-mb-md"},null,8,["modelValue"]),t[29]||(t[29]=a("div",{class:"text-subtitle1 q-mb-md"},"週計劃設定",-1)),s(H,{modelValue:U.value,"onUpdate:modelValue":t[7]||(t[7]=e=>U.value=e),class:"q-mb-md",align:"left"},{default:i(()=>[(n(!0),r(w,null,b(m.value.weeklyPlan,e=>(n(),x(I,{key:e.day,name:e.day,label:h(e.day)},null,8,["name","label"]))),128))]),_:1},8,["modelValue"]),s(J,{modelValue:U.value,"onUpdate:modelValue":t[8]||(t[8]=e=>U.value=e),animated:""},{default:i(()=>[(n(!0),r(w,null,b(m.value.weeklyPlan,(e,l)=>(n(),x(S,{key:e.day,name:e.day},{default:i(()=>[a("div",tt,[s(k,{modelValue:e.name,"onUpdate:modelValue":d=>e.name=d,label:`${h(e.day)}訓練名稱`,outlined:"",class:"q-mb-md"},null,8,["modelValue","onUpdate:modelValue","label"]),s(j,{modelValue:e.isRestDay,"onUpdate:modelValue":d=>e.isRestDay=d,label:"設為休息日",class:"q-mb-md"},null,8,["modelValue","onUpdate:modelValue"]),s(k,{modelValue:e.notes,"onUpdate:modelValue":d=>e.notes=d,label:"備註",outlined:"",type:"textarea",rows:"2",class:"q-mb-md"},null,8,["modelValue","onUpdate:modelValue"])]),e.isRestDay?M("",!0):(n(),r("div",st,[t[28]||(t[28]=a("div",{class:"text-subtitle2 q-mb-md"},"動作設定",-1)),(n(!0),r(w,null,b(e.workouts,(d,L)=>(n(),r("div",{key:L,class:"q-mb-md q-pa-md",style:{border:"1px solid #e0e0e0","border-radius":"8px"}},[a("div",lt,[a("div",ot,[s(se,{modelValue:d.exercise,"onUpdate:modelValue":f=>d.exercise=f,label:"選擇動作",options:N.value,"option-label":"name","option-value":"_id","emit-value":"","map-options":"","use-input":"",onFilter:K,outlined:"",dense:""},null,8,["modelValue","onUpdate:modelValue","options"])]),a("div",at,[s(k,{modelValue:d.sets,"onUpdate:modelValue":f=>d.sets=f,modelModifiers:{number:!0},label:"組數",type:"number",min:"1",outlined:"",dense:""},null,8,["modelValue","onUpdate:modelValue"])]),a("div",nt,[s(k,{modelValue:d.reps,"onUpdate:modelValue":f=>d.reps=f,modelModifiers:{number:!0},label:"次數",type:"number",min:"1",outlined:"",dense:""},null,8,["modelValue","onUpdate:modelValue"])]),a("div",it,[s(k,{modelValue:d.rest,"onUpdate:modelValue":f=>d.rest=f,modelModifiers:{number:!0},label:"休息(秒)",type:"number",min:"0",outlined:"",dense:""},null,8,["modelValue","onUpdate:modelValue"])]),a("div",rt,[s(v,{icon:"remove",color:"red",flat:"",dense:"",onClick:f=>me(l,L)},null,8,["onClick"])])])]))),128)),s(v,{icon:"add",label:"新增動作",color:"primary",flat:"",onClick:d=>ue(l),class:"q-mb-md"},null,8,["onClick"])]))]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])]),_:1,__:[29]}),s(z,{align:"right"},{default:i(()=>[s(v,{flat:"",label:"取消",onClick:X}),s(v,{color:"primary",label:"建立課表",onClick:re,loading:B.value,disable:!ve.value},null,8,["loading","disable"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(te,{modelValue:E.value,"onUpdate:modelValue":t[15]||(t[15]=e=>E.value=e),position:"top"},{default:i(()=>[s(V,{style:{"min-width":"500px","max-width":"800px"}},{default:i(()=>[s(_,null,{default:i(()=>t[30]||(t[30]=[a("div",{class:"text-h6"},"編輯課表",-1)])),_:1,__:[30]}),s(_,{class:"q-pt-none"},{default:i(()=>[s(k,{modelValue:u.value.title,"onUpdate:modelValue":t[10]||(t[10]=e=>u.value.title=e),label:"課表名稱",outlined:"",class:"q-mb-md"},null,8,["modelValue"]),s(k,{modelValue:u.value.content,"onUpdate:modelValue":t[11]||(t[11]=e=>u.value.content=e),label:"課表描述",outlined:"",type:"textarea",rows:"3",class:"q-mb-md"},null,8,["modelValue"]),s(j,{modelValue:u.value.isPublic,"onUpdate:modelValue":t[12]||(t[12]=e=>u.value.isPublic=e),label:"設為公開課表",class:"q-mb-md"},null,8,["modelValue"]),t[32]||(t[32]=a("div",{class:"text-subtitle1 q-mb-md"},"週計劃設定",-1)),s(H,{modelValue:R.value,"onUpdate:modelValue":t[13]||(t[13]=e=>R.value=e),class:"q-mb-md",align:"left"},{default:i(()=>[(n(!0),r(w,null,b(u.value.weeklyPlan,e=>(n(),x(I,{key:e.day,name:e.day,label:h(e.day)},null,8,["name","label"]))),128))]),_:1},8,["modelValue"]),s(J,{modelValue:R.value,"onUpdate:modelValue":t[14]||(t[14]=e=>R.value=e),animated:""},{default:i(()=>[(n(!0),r(w,null,b(u.value.weeklyPlan,(e,l)=>(n(),x(S,{key:e.day,name:e.day},{default:i(()=>[a("div",dt,[s(k,{modelValue:e.name,"onUpdate:modelValue":d=>e.name=d,label:`${h(e.day)}訓練名稱`,outlined:"",class:"q-mb-md"},null,8,["modelValue","onUpdate:modelValue","label"]),s(j,{modelValue:e.isRestDay,"onUpdate:modelValue":d=>e.isRestDay=d,label:"設為休息日",class:"q-mb-md"},null,8,["modelValue","onUpdate:modelValue"]),s(k,{modelValue:e.notes,"onUpdate:modelValue":d=>e.notes=d,label:"備註",outlined:"",type:"textarea",rows:"2",class:"q-mb-md"},null,8,["modelValue","onUpdate:modelValue"])]),e.isRestDay?M("",!0):(n(),r("div",ut,[t[31]||(t[31]=a("div",{class:"text-subtitle2 q-mb-md"},"動作設定",-1)),(n(!0),r(w,null,b(e.workouts,(d,L)=>(n(),r("div",{key:L,class:"q-mb-md q-pa-md",style:{border:"1px solid #e0e0e0","border-radius":"8px"}},[a("div",mt,[a("div",ct,[s(se,{modelValue:d.exercise,"onUpdate:modelValue":f=>d.exercise=f,label:"選擇動作",options:N.value,"option-label":"name","option-value":"_id","emit-value":"","map-options":"","use-input":"",onFilter:K,outlined:"",dense:""},null,8,["modelValue","onUpdate:modelValue","options"])]),a("div",yt,[s(k,{modelValue:d.sets,"onUpdate:modelValue":f=>d.sets=f,modelModifiers:{number:!0},label:"組數",type:"number",min:"1",outlined:"",dense:""},null,8,["modelValue","onUpdate:modelValue"])]),a("div",ft,[s(k,{modelValue:d.reps,"onUpdate:modelValue":f=>d.reps=f,modelModifiers:{number:!0},label:"次數",type:"number",min:"1",outlined:"",dense:""},null,8,["modelValue","onUpdate:modelValue"])]),a("div",vt,[s(k,{modelValue:d.rest,"onUpdate:modelValue":f=>d.rest=f,modelModifiers:{number:!0},label:"休息(秒)",type:"number",min:"0",outlined:"",dense:""},null,8,["modelValue","onUpdate:modelValue"])]),a("div",pt,[s(v,{icon:"remove",color:"red",flat:"",dense:"",onClick:f=>ye(l,L)},null,8,["onClick"])])])]))),128)),s(v,{icon:"add",label:"新增動作",color:"primary",flat:"",onClick:d=>ce(l),class:"q-mb-md"},null,8,["onClick"])]))]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])]),_:1,__:[32]}),s(z,{align:"right"},{default:i(()=>[s(v,{flat:"",label:"取消",onClick:Y}),s(v,{color:"primary",label:"儲存變更",onClick:de,loading:F.value,disable:!pe.value},null,8,["loading","disable"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1}))}},Wt=Ve(kt,[["__scopeId","data-v-f1c7a079"]]);export{Wt as default};
