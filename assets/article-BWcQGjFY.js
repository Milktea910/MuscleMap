import{m as w,aD as y,aE as A,h as b,aV as c,aJ as k,r as n}from"./index-Bn42XH2Q.js";const x='<g><path fill="none" stroke="currentColor" stroke-width="5" stroke-miterlimit="10" d="M58.4,51.7c-0.9-0.9-1.4-2-1.4-2.3s0.5-0.4,1.4-1.4 C70.8,43.8,79.8,30.5,80,15.5H70H30H20c0.2,15,9.2,28.1,21.6,32.3c0.9,0.9,1.4,1.2,1.4,1.5s-0.5,1.6-1.4,2.5 C29.2,56.1,20.2,69.5,20,85.5h10h40h10C79.8,69.5,70.8,55.9,58.4,51.7z"></path><clipPath id="uil-hourglass-clip1"><rect x="15" y="20" width="70" height="25"><animate attributeName="height" from="25" to="0" dur="1s" repeatCount="indefinite" values="25;0;0" keyTimes="0;0.5;1"></animate><animate attributeName="y" from="20" to="45" dur="1s" repeatCount="indefinite" values="20;45;45" keyTimes="0;0.5;1"></animate></rect></clipPath><clipPath id="uil-hourglass-clip2"><rect x="15" y="55" width="70" height="25"><animate attributeName="height" from="0" to="25" dur="1s" repeatCount="indefinite" values="0;25;25" keyTimes="0;0.5;1"></animate><animate attributeName="y" from="80" to="55" dur="1s" repeatCount="indefinite" values="80;55;55" keyTimes="0;0.5;1"></animate></rect></clipPath><path d="M29,23c3.1,11.4,11.3,19.5,21,19.5S67.9,34.4,71,23H29z" clip-path="url(#uil-hourglass-clip1)" fill="currentColor"></path><path d="M71.6,78c-3-11.6-11.5-20-21.5-20s-18.5,8.4-21.5,20H71.6z" clip-path="url(#uil-hourglass-clip2)" fill="currentColor"></path><animateTransform attributeName="transform" type="rotate" from="0 50 50" to="180 50 50" repeatCount="indefinite" dur="1s" values="0 50 50;0 50 50;180 50 50" keyTimes="0;0.7;1"></animateTransform></g>',M=w({name:"QSpinnerHourglass",props:y,setup(a){const{cSize:s,classes:r}=A(a);return()=>b("svg",{class:r.value,width:s.value,height:s.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg",innerHTML:x})}}),u={getFeaturedArticles(){return c.api.get("/article/featured")},getAllArticles(a={}){return c.api.get("/article",{params:a})},getArticleById(a){return c.api.get("/article/"+a)},createArticle(a){return c.apiAuth.post("/article",a)},updateArticle(a,s){return c.apiAuth.patch("/article/"+a,s)},deleteArticle(a){return c.apiAuth.delete("/article/"+a)}},P=k("article",()=>{const a=n([]),s=n([]),r=n(!1),l=n(null),d=n({currentPage:1,totalPages:1,total:0,limit:10}),o=()=>{l.value=null},p=async()=>{try{r.value=!0,o();const t=await u.getFeaturedArticles();if(t.data.success)s.value=t.data.data;else throw new Error(t.data.message||"獲取精選文章失敗")}catch(t){console.error("載入精選文章失敗:",t),l.value=t.response?.data?.message||t.message||"載入精選文章失敗";const e=h();e.length>0&&(s.value=e,console.log("使用本地備份文章資料"))}finally{r.value=!1}},m=async(t={})=>{try{r.value=!0,o();const e=await u.getAllArticles(t);if(e.data.success)a.value=e.data.data.articles,d.value={currentPage:e.data.data.currentPage,totalPages:e.data.data.totalPages,total:e.data.data.total,limit:t.limit||10};else throw new Error(e.data.message||"獲取文章列表失敗")}catch(e){console.error("載入文章列表失敗:",e),l.value=e.response?.data?.message||e.message||"載入文章列表失敗"}finally{r.value=!1}},g=async t=>{try{r.value=!0,o();const e=await u.createArticle(t);if(e.data.success)return await p(),e.data.data;throw new Error(e.data.message||"創建文章失敗")}catch(e){throw console.error("創建文章失敗:",e),l.value=e.response?.data?.message||e.message||"創建文章失敗",e}finally{r.value=!1}},f=async(t,e)=>{try{r.value=!0,o();const i=await u.updateArticle(t,e);if(i.data.success)return await p(),i.data.data;throw new Error(i.data.message||"更新文章失敗")}catch(i){throw console.error("更新文章失敗:",i),l.value=i.response?.data?.message||i.message||"更新文章失敗",i}finally{r.value=!1}},v=async t=>{try{r.value=!0,o();const e=await u.deleteArticle(t);if(e.data.success)return await p(),!0;throw new Error(e.data.message||"刪除文章失敗")}catch(e){throw console.error("刪除文章失敗:",e),l.value=e.response?.data?.message||e.message||"刪除文章失敗",e}finally{r.value=!1}},h=()=>{try{const t=localStorage.getItem("homepage-articles");if(t)return JSON.parse(t)}catch(t){console.error("讀取本地文章資料失敗:",t)}return[{title:"健身入門指南",description:"從零開始的健身之路，建立正確的健身觀念與基本動作",author:"MuscleMap 編輯部",image:"https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=400&h=300&fit=crop",link:"https://example.com/fitness-guide",buttonText:"開始學習"},{title:"營養補充攻略",description:"了解蛋白質、碳水化合物與脂肪的最佳比例",author:"MuscleMap 編輯部",image:"https://images.unsplash.com/photo-1490645935967-10de6ba17061?w=400&h=300&fit=crop",link:"https://example.com/nutrition-guide",buttonText:"立即了解"},{title:"重量訓練指南",description:"掌握正確的訓練姿勢與動作技巧，避免運動傷害",author:"MuscleMap 編輯部",image:"https://images.unsplash.com/photo-1534438327276-14e5300c3a48?w=400&h=300&fit=crop",link:"https://example.com/weight-training",buttonText:"深入了解"}]};return{articles:a,featuredArticles:s,loading:r,error:l,pagination:d,clearError:o,loadFeaturedArticles:p,loadAllArticles:m,createArticle:g,updateArticle:f,deleteArticle:v,getFallbackArticles:h}});export{M as Q,P as u};
